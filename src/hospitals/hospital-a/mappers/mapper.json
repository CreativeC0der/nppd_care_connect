{
    "info": "This is a mapper for the hospital A",
    "url": "https://r4.smarthealthit.org",
    "organizationId": "hospital-a",
    "nextUrl": "link[relation='next'].url ? link[relation='next'].url : null",
    "patientMapper": {
        "fhirId": "id ? id : $uuid()",
        "firstName": "name[0].given[0] ? name[0].given[0] : null",
        "lastName": "name[0].family ? name[0].family : null",
        "birthDate": "birthDate ? birthDate : null",
        "gender": "gender ? gender : null",
        "phone": "telecom[system='phone'].value ? telecom[system='phone'].value : null",
        "email": "telecom[system='email'].value ? telecom[system='email'].value : null",
        "city": "address[0].city ? address[0].city : null",
        "state": "address[0].state ? address[0].state : null",
        "preferredLanguage": "communication[0].language.text ? communication[0].language.text : null",
        "active": "$exists(active) ? active : true",
        "deceased": "deceasedDateTime ? deceasedDateTime : deceasedBoolean ? deceasedBoolean : false",
        "dateOfDeath": "deceasedDateTime ? deceasedDateTime : null"
    },
    "encounterMapper": {
        "fhirId": "id ? id : $uuid()",
        "status": "status ? (status = 'finished' ? 'completed' : status ) : 'unknown'",
        "type": "type[0].text ? type[0].text : 'General'",
        "reason": "reasonCode[0].coding[0].display ? reasonCode[0].coding[0].display : 'Not specified'",
        "start": "period.start ? period.start : null",
        "end": "period.end ? period.end : null",
        "class": "class.code ? class.code : null",
        "practitionerFhirIds": "participant[].individual.reference ? participant[].individual.reference.$split('/')[-1] : []"
    },
    "practitionerMapper": {
        "fhirId": "id ? id : $uuid()",
        "prefix": "name[0].prefix[0] ? name[0].prefix[0] : null",
        "firstName": "name[0].given[0] ? name[0].given[0] : null",
        "lastName": "name[0].family ? name[0].family : null",
        "gender": "gender ? gender : null",
        "birthDate": "birthDate ? birthDate : null",
        "phone": "telecom[system='phone'].value ? telecom[system='phone'].value : null",
        "email": "telecom[system='email'].value ? telecom[system='email'].value : null",
        "qualification": "qualification[0].code.text ? qualification[0].code.text : null",
        "active": "$exists(active) ? active : true"
    },
    "conditionMapper": {
        "fhirId": "id ? id : $uuid()",
        "clinicalStatus": "clinicalStatus.coding[0].code ? clinicalStatus.coding[0].code : null",
        "verificationStatus": "verificationStatus.coding[0].code ? verificationStatus.coding[0].code : null",
        "code": "code.text ? code.text : null",
        "onsetDateTime": "onsetDateTime ? onsetDateTime : null",
        "recordedDate": "recordedDate ? recordedDate : null",
        "subjectId": "subject.reference ? subject.reference.$split('/')[-1] : null",
        "encounterId": "encounter.reference ? encounter.reference.$split('/')[-1] : null"
    },
    "MedicationRequestsMapper": {
        "fhirId": "id ? id : $uuid()",
        "intent": "intent ? intent : null",
        "status": "status ? status : null",
        "authoredOn": "authoredOn ? authoredOn : null",
        "priority": "priority ? priority : null",
        "conditionId": "reasonReference[0].reference ? reasonReference[0].reference.$split('/')[-1] : null",
        "doseInstruction": "dosageInstruction ? dosageInstruction : null",
        "subjectId": "subject.reference ? subject.reference.$split('/')[-1] : null",
        "encounterId": "encounter.reference ? encounter.reference.$split('/')[-1] : null",
        "requesterId": "requester.reference ? requester.reference.$split('/')[-1] : null",
        "medicationName": "medicationCodeableConcept.coding[0].display ? medicationCodeableConcept.coding[0].display : null",
        "medicationCode": "medicationCodeableConcept.coding[0].code ? medicationCodeableConcept.coding[0].code : null",
        "dosePeriod": "null"
    },
    "appointmentMapper": {
        "fhirId": "id ? id : $uuid()",
        "status": "status ? status : 'booked'",
        "serviceCategory": "serviceType[0].coding[0].display ? serviceType[0].coding[0].display : null",
        "specialty": "serviceType[0].coding[0].code ? serviceType[0].coding[0].code : null",
        "description": "description ? description : 'N/A'",
        "reason": "comment ? comment : 'Not specified'",
        "start": "start ? start : null",
        "end": "end ? end : null",
        "patientFhirId": "participant[].actor.reference ? participant[actor.reference.$contains('Patient/')].actor[].reference.$split('/')[-1] : null",
        "practitionerFhirIds": "participant[].actor.reference ? participant[actor.reference.$contains('Practitioner/')].actor[].reference.$split('/')[-1] : []"
    },
    "scheduleMapper": {
        "fhirId": "id ? id : $uuid()",
        "active": "$exists(active) ? active : true",
        "serviceCategory": "serviceType[0].coding[0].display ? serviceType[0].coding[0].display : null",
        "serviceType": "serviceType[0].coding[0].code ? serviceType[0].coding[0].code : null",
        "specialty": "specialty[0].coding[0].display ? specialty[0].coding[0].display : null",
        "name": "identifier[0].value ? identifier[0].value : null",
        "planningHorizonStart": "planningHorizon.start ? planningHorizon.start : null",
        "planningHorizonEnd": "planningHorizon.end ? planningHorizon.end : null",
        "comment": "comment ? comment : null",
        "actorId": "actor[].reference ? actor[reference.$contains('Practitioner/')].reference.$split('/')[-1] : null"
    },
    "slotMapper": {
        "fhirId": "id ? id : $uuid()",
        "status": "status ? status : 'free'",
        "start": "start ? start : null",
        "end": "end ? end : null",
        "serviceType": "serviceType[0].coding[0].code ? serviceType[0].coding[0].code : null",
        "specialty": "specialty[0].coding[0].display ? specialty[0].coding[0].display : null",
        "comment": "appointmentType.coding[0].display ? appointmentType.coding[0].display : 'N/A'",
        "scheduleId": "schedule.reference ? schedule.reference.$split('/')[-1] : null"
    },
    "observationMapper": {
        "fhirId": "id ? id : $uuid()",
        "status": "status ? status : 'unknown'",
        "category": "category[0].coding[0].code ? (category[0].coding[0].code='vital-sign'? 'vital-signs': category[0].coding[0].code ): null",
        "code": "code.text ? code.text : 'N/A'",
        "effectiveDateTime": "effectiveDateTime ? effectiveDateTime : null",
        "issued": "issued ? issued : null",
        "value": "valueQuantity.value ? valueQuantity.value : valueCodeableConcept.text ? valueCodeableConcept.text : 'N/A'",
        "unit": "valueQuantity.unit ? valueQuantity.unit : 'N/A'",
        "subjectId": "subject.reference ? subject.reference.$split('/')[-1] : null",
        "encounterId": "encounter.reference ? encounter.reference.$split('/')[-1] : null"
    },
    "diagnosticReportMapper": {
        "fhirId": "id ? id : $uuid()",
        "status": "status ? status : 'unknown'",
        "category": "category[0].coding[0].display ? category[0].coding[0].display : null",
        "code": "code.text ? code.text : null",
        "effectiveDateTime": "effectiveDateTime ? effectiveDateTime : null",
        "issued": "issued ? issued : null",
        "media": "media ? media : null",
        "subjectId": "subject.reference ? subject.reference.$split('/')[-1] : null",
        "encounterId": "encounter.reference ? encounter.reference.$split('/')[-1] : null",
        "resultFhirIds": "result[].reference ? result[].reference.$split('/')[-1] : []"
    },
    "procedureMapper": {
        "fhirId": "id ? id : $uuid()",
        "status": "status ? status : 'preparation'",
        "code": "code.text ? code.text : null",
        "subjectId": "subject.reference ? subject.reference.$split('/')[-1] : null",
        "encounterId": "encounter.reference ? encounter.reference.$split('/')[-1] : null",
        "occurrenceStart": "performedPeriod.start ? performedPeriod.start : null",
        "occurrenceEnd": "performedPeriod.end ? performedPeriod.end : null",
        "reasonFhirIds": "reasonReference[].reference ? reasonReference[].reference.$split('/')[-1] : []"
    }
}